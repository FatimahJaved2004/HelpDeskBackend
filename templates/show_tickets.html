<!doctype html>
<html>
<head>
  <title>All Tickets</title>
</head>
<body>
  <h1>Submitted Tickets</h1>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <ul>
        {% for category, message in messages %}
          <li><strong>{{ category }}:</strong> {{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  {% if tickets %}
    <table border="1" cellpadding="10">
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Description</th>
        <th>User ID</th>
      </tr>
      {% for ticket in tickets %}
        <tr>
          <td>{{ ticket.id }}</td>
          <td>{{ ticket.title }}</td>
          <td>{{ ticket.description }}</td>
          <td>{{ user.username }}</td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <p>No tickets submitted yet.</p>
  {% endif %}

  <p><a href="{{ url_for('submit_ticket') }}">Submit New Ticket</a></p>
</body>
</html>
